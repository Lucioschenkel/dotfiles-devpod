#!/bin/bash

export XDG_CONFIG_HOME="$HOME/.config"

mkdir -p "$XDG_CONFIG_HOME"
mkdir -p "$XDG_CONFIG_HOME/nixpkgs"
mkdir -p "$XDG_CONFIG_HOME/nvim"

ln -sf "$PWD/config.nix" "$XDG_CONFIG_HOME/nixpkgs/config.nix"
ln -sf "$PWD/.config/nvim" "$XDG_CONFIG_HOME/nvim"

# Download .zshrc from main dotfiles repo
curl -o "$HOME/.zshrc" https://raw.githubusercontent.com/Lucioschenkel/dotfiles/main/.zshrc

# Install nix pkgs from config.nix
nix-env -iA nixpkgs.myPackages

# Install pure prompt
mkdir -p "$HOME/.zsh"
git clone https://github.com/sindresorhus/pure.git "$HOME/.zsh/pure"

# Setup shell completion
mkdir -p "$HOME/.zfunc"
flux completion zsh >$HOME/.zfunc/_flux
kubectl completion zsh >$HOME/.zfunc/_kubectl
helm completion zsh >$HOME/.zfunc/_helm
