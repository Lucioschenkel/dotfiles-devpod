#!/bin/bash

export XDG_CONFIG_HOME="$HOME"/.config

# Download .zshrc from main dotfiles repo
curl -o "$HOME/.zshrc" https://raw.githubusercontent.com/Lucioschenkel/dotfiles/main/.zshrc

# Setup homebrew
test -d ~/.linuxbrew && eval "$(~/.linuxbrew/bin/brew shellenv)"
test -d /home/linuxbrew/.linuxbrew && eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"

# Install brew packages
/home/linuxbrew/.linuxbrew/bin/brew bundle install --file Brewfile

# Install pure prompt
mkdir -p "$HOME/.zsh"
git clone https://github.com/sindresorhus/pure.git "$HOME/.zsh/pure"

source ~/.zshrc

# Symlink dotfiles
stow .

# Setup shell completion
mkdir -p "$HOME/.zfunc"
flux completion zsh >$HOME/.zfunc/_flux
kubectl completion zsh >$HOME/.zfunc/_kubectl
helm completion zsh >$HOME/.zfunc/_helm
